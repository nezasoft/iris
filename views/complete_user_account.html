				
<script>
$('#password').keyup(function(){
$('#result').fadeIn()
$('#result').html(checkStrength($('#password').val()))
						    });
function checkStrength(password){ //initial strength
var strength = 0; //if the password length is less than 6, return message.
 if (password.length < 8) {
 $('#result').removeClass();
 $('#result').addClass('short');
 return 'Too short';
}
 //length is ok, lets continue. //if length is 8 characters or more, increase strength value
if (password.length > 8) {
 strength += 1 ;
}
//if password contains both lower and uppercase characters, increase strength value
 if (password.match(/([a-z].*[A-Z])|([A-Z].*[a-z])/)){
strength += 1 ;
 }
//if it has numbers and characters, increase strength value
if (password.match(/([a-zA-Z])/) && password.match(/([0-9])/)){
 strength += 1 ;
}
//if it has one special character, increase strength value
if (password.match(/([!,%,&,@,#,$,^,*,?,_,~])/)) {
strength += 1 ;
}
//if it has two special characters, increase strength value
 if (password.match(/(.*[!,%,&,@,#,$,^,*,?,_,~].*[!,",%,&,@,#,$,^,*,?,_,~])/)){
strength += 1 ;
}
//now we have calculated strength value, we can return messages //if value is less than 2

if (strength < 2 ) {
$('#result').removeClass();
$('#result').addClass('weak');
return 'Weak';
}else if(strength == 2 ) {
$('#result').removeClass();
$('#result').addClass('good');
return 'Good';
}else{
$('#result').removeClass();
$('#result').addClass('strong');
return 'Strong';
}
				</script>
				<script>


$(document).ready(function(){


//hide all errors when form loads
$("#fname_error").hide();
$("#lname_error").hide();
$("#email_error").hide();
$("#confirm_pass_error").hide();
$("#match_pass_error").hide();
$("#role_error").hide();
$("#site_error").hide();
$("#password_error").hide();
$("#invalidemail_error").hide();

$("#response").hide();
$(".loader").hide();
//check if submit button has been clicked

		$("#submit").click(function(e){
		e.preventDefault();
		$("#response").empty();
		//error
		error = false;
		fname = $("#fname").val();
		lname = $("#lname").val();
		email = $("#email").val();
		site = $("#site").val();
		role = $("#role").val();
		ver_code = '<?php echo sanitize_string($_GET['ver_code']); ?>';
		password = $("#password").val();
		confirm_pass = $("#confirm_pass").val();
		
		if(confirm_pass ===''){
		error =true;
		$("#confirm_pass_error").fadeIn();
		$("#confirm_pass").focus();
		}else{
		$("#confirm_pass_error").fadeOut();
			if(confirm_pass !== password){
			error =true;
			$("#match_pass_error").fadeIn();
			$("#match_pass").focus();
			}else{
			$("#match_pass_error").fadeOut();
			
			}
		}
		
		if(password ===''){
		error =true;
		$("#password_error").fadeIn();
		$("#password").focus();
		}else{
		$("#password_error").fadeOut();
		
		}
		
		if(role ===''){
		error =true;
		$("#role_error").fadeIn();
		$("#role").focus();
		}else{
		$("#role_error").fadeOut();
		
		}
		if(site ===''){
		error =true;
		$("#site_error").fadeIn();
		$("#site").focus();
		}else{
		$("#site_error").fadeOut();
		
		}
		
		if(email ===''){
		error =true;
		$("#email_error").fadeIn();
		$("#email").focus();
		}else{
		$("#email_error").fadeOut();
		if(email.indexOf('@') == '-1'){
		error = true;
		$('#invalidemail_error').fadeIn();
		$("#email").focus();
		 }else{
		 $('#invalidemail_error').fadeOut();
		  }
		
		}
		if(lname ===''){
		error =true;
		$("#lname_error").fadeIn();
		$("#lname").focus();
		}else{
		$("#lname_error").fadeOut();
		
		}
		if(fname ===''){
		error =true;
		$("#fname_error").fadeIn();
		$("#fname").focus();
		}else{
		$("#fname_error").fadeOut();
		
		}
		
		//if no errors send request to server
		if(error ==false){
		//hide submit button
		$("#submit").fadeOut();
		$(".loader").fadeIn();
		
		/* Ajax Request here*/
					//data values
			var myData = 'confirm_pass='+ confirm_pass + '&ver_code='+ ver_code + '&email='+ email; //build a post data structure
			jQuery.ajax({
			type: "POST", // Post / Get method
			url: "../process/complete_user_registration.php", //Where form data is sent on submission
			dataType:"text", // Data type, HTML, json etc.
			data:myData, //Form variables
			success:function(response){
			$("#response").append(response); 
			$('.loader').fadeOut();
			$('#submit').fadeIn();
			$('#response').fadeIn();
			}

			});
		}
		
		});
});	

</script>

<?php
$ver_code = sanitize_string($_GET['ver_code']);
$qr_row = mysql_fetch_assoc(mysql_query("select * from users where ver_code='$ver_code' limit 1" ));

?>	
				<div class="col-sm-4">
					<div class="signup-form"><!--sign up form-->
						<h2>Complete Registration</h2>
						<form action="../process/complete_user_registration.php" method="POST">
						    <span class="error" id="fname_error">* First Name</span><br/>
							<input type="text" name="fname" id="fname" disabled value="<?php echo $qr_row['fname'];?>"/>
							<span class="error" id="lname_error">* Last Name</span><br/>
							<input type="text" name="lname" id="lname" disabled value="<?php echo $qr_row['lname'];?>"/>
							<span class="error" id="email_error">* Email Address</span><br/>
							<span class="error" id="invalidemail_error">* Invalid Email Address</span><br/>
							<input type="email" name="email" id="email" disabled value="<?php echo $qr_row['email'];?>"/>
						<span id="result"></span>
						<span class="error" id="password_error">* Password</span><br/>
							<input type="password" name="password" id="password" placeholder="Password"/>
							<span class="error" id="confirm_pass_error">* Confirm Password</span><br/>
							<span class="error" id="match_pass_error">* Passwords do not match</span><br/>
							<input type="password" name="confirm_pass" id="confirm_pass" placeholder="Confirm Password"/>
							<button type="submit" id="submit" class="btn btn-default">Complete Registration</button>
							<span class="loader"><img src="../images/loader.gif" width="80px" height="80px"/>Processing Request...</span>
							<div id="response"></div>
						</form>
					</div><!--/sign up form-->
				</div>